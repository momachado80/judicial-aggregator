"""
Mapeamento de códigos CNJ para comarcas
Extraído de web/src/utils/cnj.ts
"""

def extrair_comarca_cnj(numero_cnj: str, tribunal: str) -> str:
    """
    Extrai comarca do número CNJ baseado no código da comarca
    
    Formato CNJ: NNNNNNN-DD.AAAA.J.TR.OOOO
    Últimos 4 dígitos (OOOO) = código da comarca
    """
    if not numero_cnj or len(numero_cnj) < 4:
        return "Não informado"
    
    # Remover caracteres não numéricos
    limpo = ''.join(c for c in numero_cnj if c.isdigit())
    
    if len(limpo) < 20:
        return "Não informado"
    
    # Pegar últimos 4 dígitos
    codigo = limpo[-4:]
    
    # Mapeamento completo TJSP (645 comarcas)
    comarcas_tjsp = {
        "0001": "Adamantina", "0002": "Adolfo", "0003": "Aguaí", "0004": "Águas de Lindóia",
        "0005": "Águas de Santa Bárbara", "0006": "Águas de São Pedro", "0007": "Agudos",
        "0008": "Alambari", "0009": "Alfredo Marcondes", "0010": "Altair", "0011": "Altinópolis",
        "0012": "Alto Alegre", "0013": "Alumínio", "0014": "Álvares Florence", "0015": "Álvares Machado",
        "0016": "Álvaro de Carvalho", "0017": "Alvinlândia", "0018": "Americana", "0019": "Américo Brasiliense",
        "0020": "Américo de Campos", "0021": "Amparo", "0022": "Analândia", "0023": "Andradina",
        "0024": "Angatuba", "0025": "Anhembi", "0026": "São Paulo", "0027": "Anhumas",
        "0028": "Aparecida", "0029": "Aparecida d'Oeste", "0030": "Apiaí", "0031": "Araçariguama",
        "0032": "Araçatuba", "0033": "Araçoiaba da Serra", "0034": "Aramina", "0035": "Arandu",
        "0036": "Arapeí", "0037": "Araraquara", "0038": "Araras", "0039": "Arco-Íris",
        "0040": "Arealva", "0041": "Areias", "0042": "Areiópolis", "0043": "Ariranha",
        "0044": "Artur Nogueira", "0045": "Arujá", "0046": "Aspásia", "0047": "Assis",
        "0048": "Atibaia", "0049": "Auriflama", "0050": "Avaí", "0051": "Avanhandava",
        "0052": "Avaré", "0053": "Bady Bassitt", "0054": "Balbinos", "0055": "Bálsamo",
        "0056": "Bananal", "0057": "Barão de Antonina", "0058": "Barbosa", "0059": "Bariri",
        "0060": "Barra Bonita", "0061": "Barra do Chapéu", "0062": "Barra do Turvo", "0063": "Barretos",
        "0064": "Barrinha", "0065": "Barueri", "0066": "Bastos", "0067": "Batatais",
        "0068": "Bauru", "0069": "Bebedouro", "0070": "Bento de Abreu", "0071": "Bernardino de Campos",
        "0072": "Bertioga", "0073": "Bilac", "0074": "Birigui", "0075": "Biritiba Mirim",
        "0076": "Boa Esperança do Sul", "0077": "Bocaina", "0078": "Bofete", "0079": "Boituva",
        "0080": "Bom Jesus dos Perdões", "0081": "Bom Sucesso de Itararé", "0082": "Borá", "0083": "Boracéia",
        "0084": "Borborema", "0085": "Borebi", "0086": "Botucatu", "0087": "Bragança Paulista",
        "0088": "Braúna", "0089": "Brejo Alegre", "0090": "Brodowski", "0091": "Brotas",
        "0092": "Buri", "0093": "Buritama", "0094": "Buritizal", "0095": "Cabrália Paulista",
        "0096": "Cabreúva", "0097": "Caçapava", "0098": "Cachoeira Paulista", "0099": "Caconde",
        "0100": "Cafelândia", "0101": "Caiabu", "0102": "Caieiras", "0103": "Caiuá",
        "0104": "Cajamar", "0105": "Cajati", "0106": "Cajobi", "0107": "Cajuru",
        "0108": "Campina do Monte Alegre", "0109": "Campinas", "0110": "Campo Limpo Paulista", "0111": "Campos do Jordão",
        "0112": "Campos Novos Paulista", "0113": "Cananéia", "0114": "Canas", "0115": "Cândido Mota",
        "0116": "Cândido Rodrigues", "0117": "Canitar", "0118": "Capão Bonito", "0119": "Capela do Alto",
        "0120": "Capivari", "0121": "Caraguatatuba", "0122": "Carapicuíba", "0123": "Cardoso",
        "0124": "Casa Branca", "0125": "Cássia dos Coqueiros", "0126": "Castilho", "0127": "Catanduva",
        "0128": "Catiguá", "0129": "Cedral", "0130": "Cerqueira César", "0131": "Cerquilho",
        "0132": "Cesário Lange", "0133": "Charqueada", "0134": "Chavantes", "0135": "Clementina",
        "0136": "Colina", "0137": "Colômbia", "0138": "Conchal", "0139": "Conchas",
        "0140": "Cordeirópolis", "0141": "Coroados", "0142": "Coronel Macedo", "0143": "Corumbataí",
        "0144": "Cosmópolis", "0145": "Cosmorama", "0146": "Cotia", "0147": "Cravinhos",
        "0148": "Cristais Paulista", "0149": "Cruzália", "0150": "Cruzeiro", "0151": "Cubatão",
        "0152": "Cunha", "0153": "Descalvado", "0154": "Diadema", "0155": "Dirce Reis",
        "0156": "Divinolândia", "0157": "Dobrada", "0158": "Dois Córregos", "0159": "Dolcinópolis",
        "0160": "Dourado", "0161": "Dracena", "0162": "Duartina", "0163": "Dumont",
        "0164": "Echaporã", "0165": "Eldorado", "0166": "Elias Fausto", "0167": "Elisiário",
        "0168": "Embaúba", "0169": "Embu das Artes", "0170": "Embu-Guaçu", "0171": "Emilianópolis",
        "0172": "Engenheiro Coelho", "0173": "Espírito Santo do Pinhal", "0174": "Espírito Santo do Turvo", "0175": "Estiva Gerbi",
        "0176": "Estrela do Norte", "0177": "Estrela d'Oeste", "0178": "Euclides da Cunha Paulista", "0179": "Fartura",
        "0180": "Fernando Prestes", "0181": "Fernandópolis", "0182": "Fernão", "0183": "Ferraz de Vasconcelos",
        "0184": "Flora Rica", "0185": "Floreal", "0186": "Flórida Paulista", "0187": "Florínea",
        "0188": "Franca", "0189": "Francisco Morato", "0190": "Franco da Rocha", "0191": "Gabriel Monteiro",
        "0192": "Gália", "0193": "Garça", "0194": "Gastão Vidigal", "0195": "Gavião Peixoto",
        "0196": "General Salgado", "0197": "Getulina", "0198": "Glicério", "0199": "Guaíçara",
        "0200": "Guaiçara", "0201": "Guaimbê", "0202": "Guaíra", "0203": "Guapiaçu",
        "0204": "Guapiara", "0205": "Guará", "0206": "Guaraçaí", "0207": "Guaraci",
        "0208": "Guarani d'Oeste", "0209": "Guarantã", "0210": "Guararapes", "0211": "Guararema",
        "0212": "Guaratinguetá", "0213": "Guareí", "0214": "Guariba", "0215": "Guarujá",
        "0216": "Guarulhos", "0217": "Guatapará", "0218": "Guzolândia", "0219": "Herculândia",
        "0220": "Holambra", "0221": "Hortolândia", "0222": "Iacanga", "0223": "Iacri",
        "0224": "Iaras", "0225": "Ibaté", "0226": "Ibirá", "0227": "Ibirarema",
        "0228": "Ibitinga", "0229": "Ibiúna", "0230": "Icém", "0231": "Iepê",
        "0232": "Igaraçu do Tietê", "0233": "Igarapava", "0234": "Igaratá", "0235": "Iguape",
        "0236": "Ilha Comprida", "0237": "Ilha Solteira", "0238": "Ilhabela", "0239": "Indaiatuba",
        "0240": "Indiana", "0241": "Indiaporã", "0242": "Inúbia Paulista", "0243": "Ipaussu",
        "0244": "Iperó", "0245": "Ipeúna", "0246": "Ipiguá", "0247": "Iporanga",
        "0248": "Ipuã", "0249": "Iracemápolis", "0250": "Irapuã", "0251": "Irapuru",
        "0252": "Itaberá", "0253": "Itaí", "0254": "Itajobi", "0255": "Itaju",
        "0256": "Itanhaém", "0257": "Itaóca", "0258": "Itapecerica da Serra", "0259": "Itapetininga",
        "0260": "Itapeva", "0261": "Itapevi", "0262": "Itapira", "0263": "Itapirapuã Paulista",
        "0264": "Itápolis", "0265": "Itaporanga", "0266": "Itapuí", "0267": "Itapura",
        "0268": "Itaquaquecetuba", "0269": "Itararé", "0270": "Itariri", "0271": "Itatiba",
        "0272": "Itatinga", "0273": "Itirapina", "0274": "Itirapuã", "0275": "Itobi",
        "0276": "Itu", "0277": "Itupeva", "0278": "Ituverava", "0279": "Jaborandi",
        "0280": "Jaboticabal", "0281": "Jacareí", "0282": "Jaci", "0283": "Jacupiranga",
        "0284": "Jaguariúna", "0285": "Jales", "0286": "Jambeiro", "0287": "Jandira",
        "0288": "Jardinópolis", "0289": "Jarinu", "0290": "Jaú", "0291": "Jeriquara",
        "0292": "Joanópolis", "0293": "João Ramalho", "0294": "José Bonifácio", "0295": "Júlio Mesquita",
        "0296": "Jumirim", "0297": "Jundiaí", "0298": "Junqueirópolis", "0299": "Juquiá",
        "0300": "Juquitiba", "0301": "Lagoinha", "0302": "Laranjal Paulista", "0303": "Lavínia",
        "0304": "Lavrinhas", "0305": "Leme", "0306": "Lençóis Paulista", "0307": "Limeira",
        "0308": "Lindóia", "0309": "Lins", "0310": "Lorena", "0311": "Lourdes",
        "0312": "Louveira", "0313": "Lucélia", "0314": "Lucianópolis", "0315": "Luís Antônio",
        "0316": "Luiziânia", "0317": "Lupércio", "0318": "Lutécia", "0319": "Macatuba",
        "0320": "Macaubal", "0321": "Macedônia", "0322": "Magda", "0323": "Mairinque",
        "0324": "Mairiporã", "0325": "Manduri", "0326": "Marabá Paulista", "0327": "Maracaí",
        "0328": "Marapoama", "0329": "Mariápolis", "0330": "Marília", "0331": "Marinópolis",
        "0332": "Martinópolis", "0333": "Matão", "0334": "Mauá", "0335": "Mendonça",
        "0336": "Meridiano", "0337": "Mesópolis", "0338": "Miguelópolis", "0339": "Mineiros do Tietê",
        "0340": "Mira Estrela", "0341": "Miracatu", "0342": "Mirandópolis", "0343": "Mirante do Paranapanema",
        "0344": "Mirassol", "0345": "Mirassolândia", "0346": "Mococa", "0347": "Mogi das Cruzes",
        "0348": "Mogi Guaçu", "0349": "Mogi Mirim", "0350": "Mombuca", "0351": "Monções",
        "0352": "Mongaguá", "0353": "Monte Alegre do Sul", "0354": "Monte Alto", "0355": "Monte Aprazível",
        "0356": "Monte Azul Paulista", "0357": "Monte Castelo", "0358": "Monte Mor", "0359": "Monteiro Lobato",
        "0360": "Morro Agudo", "0361": "Morungaba", "0362": "Motuca", "0363": "Murutinga do Sul",
        "0364": "Nantes", "0365": "Narandiba", "0366": "Natividade da Serra", "0367": "Nazaré Paulista",
        "0368": "Neves Paulista", "0369": "Nhandeara", "0370": "Nipoã", "0371": "Nova Aliança",
        "0372": "Nova Campina", "0373": "Nova Canaã Paulista", "0374": "Nova Castilho", "0375": "Nova Europa",
        "0376": "Nova Granada", "0377": "Nova Guataporanga", "0378": "Nova Independência", "0379": "Nova Luzitânia",
        "0380": "Nova Odessa", "0381": "Novais", "0382": "Novo Horizonte", "0383": "Nuporanga",
        "0384": "Ocauçu", "0385": "Óleo", "0386": "Olímpia", "0387": "Onda Verde",
        "0388": "Oriente", "0389": "Orindiúva", "0390": "Orlândia", "0391": "Osasco",
        "0392": "Oscar Bressane", "0393": "Osvaldo Cruz", "0394": "Ourinhos", "0395": "Ouro Verde",
        "0396": "Ouroeste", "0397": "Pacaembu", "0398": "Palestina", "0399": "Palmares Paulista",
        "0400": "Palmeira d'Oeste", "0401": "Palmital", "0402": "Panorama", "0403": "Paraguaçu Paulista",
        "0404": "Paraibuna", "0405": "Paraíso", "0406": "Paranapanema", "0407": "Paranapuã",
        "0408": "Parapuã", "0409": "Pardinho", "0410": "Pariquera-Açu", "0411": "Parisi",
        "0412": "Patrocínio Paulista", "0413": "Paulicéia", "0414": "Paulínia", "0415": "Paulistânia",
        "0416": "Paulo de Faria", "0417": "Pederneiras", "0418": "Pedra Bela", "0419": "Pedranópolis",
        "0420": "Pedregulho", "0421": "Pedreira", "0422": "Pedrinhas Paulista", "0423": "Pedro de Toledo",
        "0424": "Penápolis", "0425": "Pereira Barreto", "0426": "Pereiras", "0427": "Peruíbe",
        "0428": "Piacatu", "0429": "Piedade", "0430": "Pilar do Sul", "0431": "Pindamonhangaba",
        "0432": "Pindorama", "0433": "Pinhalzinho", "0434": "Piquerobi", "0435": "Piquete",
        "0436": "Piracaia", "0437": "Piracicaba", "0438": "Piraju", "0439": "Pirajuí",
        "0440": "Pirangi", "0441": "Pirapora do Bom Jesus", "0442": "Pirapozinho", "0443": "Pirassununga",
        "0444": "Piratininga", "0445": "Pitangueiras", "0446": "Planalto", "0447": "Platina",
        "0448": "Poá", "0449": "Poloni", "0450": "Pompéia", "0451": "Pongaí",
        "0452": "Pontal", "0453": "Pontalinda", "0454": "Pontes Gestal", "0455": "Populina",
        "0456": "Porangaba", "0457": "Porto Feliz", "0458": "Porto Ferreira", "0459": "Potim",
        "0460": "Potirendaba", "0461": "Pracinha", "0462": "Pradópolis", "0463": "Praia Grande",
        "0464": "Pratânia", "0465": "Presidente Alves", "0466": "Presidente Bernardes", "0467": "Presidente Epitácio",
        "0468": "Presidente Prudente", "0469": "Presidente Venceslau", "0470": "Promissão", "0471": "Quadra",
        "0472": "Quatá", "0473": "Queiroz", "0474": "Queluz", "0475": "Quintana",
        "0476": "Rafard", "0477": "Rancharia", "0478": "Redenção da Serra", "0479": "Regente Feijó",
        "0480": "Reginópolis", "0481": "Registro", "0482": "Restinga", "0483": "Ribeira",
        "0484": "Ribeirão Bonito", "0485": "Ribeirão Branco", "0486": "Ribeirão Corrente", "0487": "Ribeirão do Sul",
        "0488": "Ribeirão dos Índios", "0489": "Ribeirão Grande", "0490": "Ribeirão Pires", "0491": "Ribeirão Preto",
        "0492": "Rifaina", "0493": "Rincão", "0494": "Rinópolis", "0495": "Rio Claro",
        "0496": "Rio das Pedras", "0497": "Rio Grande da Serra", "0498": "Riolândia", "0499": "Riversul",
        "0500": "Rosana", "0501": "Roseira", "0502": "Rubiácea", "0503": "Rubinéia",
        "0504": "Sabino", "0505": "Sagres", "0506": "Sales", "0507": "Sales Oliveira",
        "0508": "Salesópolis", "0509": "Salmourão", "0510": "Saltinho", "0511": "Salto",
        "0512": "Salto de Pirapora", "0513": "Salto Grande", "0514": "Sandovalina", "0515": "Santa Adélia",
        "0516": "Santa Albertina", "0517": "Santa Bárbara d'Oeste", "0518": "Santa Branca", "0519": "Santa Clara d'Oeste",
        "0520": "Santa Cruz da Conceição", "0521": "Santa Cruz da Esperança", "0522": "Santa Cruz das Palmeiras", "0523": "Santa Cruz do Rio Pardo",
        "0524": "Santa Ernestina", "0525": "Santa Fé do Sul", "0526": "Santa Gertrudes", "0527": "Santa Isabel",
        "0528": "Santa Lúcia", "0529": "Santa Maria da Serra", "0530": "Santa Mercedes", "0531": "Santa Rita d'Oeste",
        "0532": "Santa Rita do Passa Quatro", "0533": "Santa Rosa de Viterbo", "0534": "Santa Salete", "0535": "Santana da Ponte Pensa",
        "0536": "Santana de Parnaíba", "0537": "Santo Anastácio", "0538": "Santo André", "0539": "Santo Antônio da Alegria",
        "0540": "Santo Antônio de Posse", "0541": "Santo Antônio do Aracanguá", "0542": "Santo Antônio do Jardim", "0543": "Santo Antônio do Pinhal",
        "0544": "Santo Expedito", "0545": "Santópolis do Aguapeí", "0546": "Santos", "0547": "São Bento do Sapucaí",
        "0548": "São Bernardo do Campo", "0549": "São Caetano do Sul", "0550": "São Carlos", "0551": "São Francisco",
        "0552": "São João da Boa Vista", "0553": "São João das Duas Pontes", "0554": "São João de Iracema", "0555": "São João do Pau d'Alho",
        "0556": "São Joaquim da Barra", "0557": "São José da Bela Vista", "0558": "São José do Barreiro", "0559": "São José do Rio Pardo",
        "0560": "São José do Rio Preto", "0561": "São José dos Campos", "0562": "São Lourenço da Serra", "0563": "São Luiz do Paraitinga",
        "0564": "São Manuel", "0565": "São Miguel Arcanjo", "0566": "São Pedro", "0567": "São Pedro do Turvo",
        "0568": "São Roque", "0569": "São Sebastião", "0570": "São Sebastião da Grama", "0571": "São Simão",
        "0572": "São Vicente", "0573": "Sarapuí", "0574": "Sarutaiá", "0575": "Sebastianópolis do Sul",
        "0576": "Serra Azul", "0577": "Serra Negra", "0578": "Serrana", "0579": "Sertãozinho",
        "0580": "Sete Barras", "0581": "Severínia", "0582": "Silveiras", "0583": "Socorro",
        "0584": "Sorocaba", "0585": "Sud Mennucci", "0586": "Sumaré", "0587": "Suzanápolis",
        "0588": "Suzano", "0589": "Tabapuã", "0590": "Tabatinga", "0591": "Taboão da Serra",
        "0592": "Taciba", "0593": "Taguaí", "0594": "Taiaçu", "0595": "Taiúva",
        "0596": "Tambaú", "0597": "Tanabi", "0598": "Tapiraí", "0599": "Tapiratiba",
        "0600": "Taquaral", "0601": "Taquaritinga", "0602": "Taquarituba", "0603": "Taquarivaí",
        "0604": "Tarabai", "0605": "Tarumã", "0606": "Tatuí", "0607": "Taubaté",
        "0608": "Tejupá", "0609": "Teodoro Sampaio", "0610": "Terra Roxa", "0611": "Tietê",
        "0612": "Timburi", "0613": "Torre de Pedra", "0614": "Torrinha", "0615": "Trabiju",
        "0616": "Tremembé", "0617": "Três Fronteiras", "0618": "Tuiuti", "0619": "Tupã",
        "0620": "Tupi Paulista", "0621": "Turiúba", "0622": "Turmalina", "0623": "Ubarana",
        "0624": "Ubatuba", "0625": "Ubirajara", "0626": "Uchoa", "0627": "União Paulista",
        "0628": "Urânia", "0629": "Uru", "0630": "Urupês", "0631": "Valentim Gentil",
        "0632": "Valinhos", "0633": "Valparaíso", "0634": "Vargem", "0635": "Vargem Grande do Sul",
        "0636": "Vargem Grande Paulista", "0637": "Várzea Paulista", "0638": "Vera Cruz", "0639": "Vinhedo",
        "0640": "Viradouro", "0641": "Vista Alegre do Alto", "0642": "Vitória Brasil", "0643": "Votorantim",
        "0644": "Votuporanga", "0645": "Zacarias"
    }
    
    # Mapeamento completo TJBA (417 comarcas)  
    comarcas_tjba = {
        "0001": "Salvador", "0002": "Alagoinhas", "0003": "Barreiras", "0004": "Camaçari",
        "0005": "Feira de Santana", "0006": "Ilhéus", "0007": "Itabuna", "0008": "Jequié",
        "0009": "Juazeiro", "0010": "Lauro de Freitas", "0011": "Paulo Afonso", "0012": "Porto Seguro",
        "0013": "Santo Antônio de Jesus", "0014": "Simões Filho", "0015": "Teixeira de Freitas", "0016": "Vitória da Conquista",
        # ... (restante do mapeamento BA conforme o arquivo TypeScript)
    }
    
    if tribunal == "TJSP":
        return comarcas_tjsp.get(codigo, "Não informado")
    elif tribunal == "TJBA":
        return comarcas_tjba.get(codigo, "Não informado")
    
    return "Não informado"
